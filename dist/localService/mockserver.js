sap.ui.define(["sap/ui/core/util/MockServer"],(function(e){"use strict";var t,a="sap/fe/demo/traveloverview/";return{init:function(){var r=jQuery.sap.getUriParameters(),s=jQuery.sap.getModulePath(a+"manifest",".json"),n=r.get("errorType"),o="badRequest"===n?400:500,i=jQuery.sap.syncGetJSON(s).data["sap.app"].dataSources;for(var u in i)if(i.hasOwnProperty(u)){var p=i[u],l=jQuery.sap.getModulePath(a+p.settings.localUri.replace(".xml",""),".xml"),c=l.slice(0,l.lastIndexOf("/")+1);p.settings.localUri;if(p.settings&&p.settings.localUri&&(void 0===p.type||"OData"===p.type)){var d=jQuery.sap.getModulePath(a+p.settings.localUri.replace(".xml",""),".xml");(t=new e({rootUri:/.*\/$/.test(p.uri)?p.uri:p.uri+"/"})).simulate(d,{sMockdataBaseUrl:c,bGenerateMissingMockData:!0}),t.start()}(p.settings.annotations||[]).forEach((function(t){var r=i[t],s=r.uri,n=jQuery.sap.getModulePath(a+r.settings.localUri.replace(".xml",""),".xml");new e({rootUri:s,requests:[{method:"GET",path:new RegExp(""),response:function(e){var t=jQuery.sap.sjax({url:n,dataType:"xml"}).data;return e.respondXML(200,{},jQuery.sap.serializeXML(t)),!0}}]}).start()}))}e.config({autoRespond:!0,autoRespondAfter:r.get("serverDelay")||1e3});var f=t.getRequests(),g=function(e,t,a){a.response=function(a){a.respond(e,{"Content-Type":"text/plain;charset=utf-8"},t)}};r.get("metadataError")&&f.forEach((function(e){e.path.toString().indexOf("$metadata")>-1&&g(500,"metadata Error",e)})),n&&f.forEach((function(e){e.path.toString().indexOf("")>-1&&g(o,n,e)})),t.start(),jQuery.sap.log.info("Running the app with mock data")},getMockServer:function(){return t}}}));